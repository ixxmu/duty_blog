<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Deploy TAILSCALE on OpenWRT to Replace ZEROTIER - 文字轨迹</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:url" content="https://ixxmu.github.io/posts/2024-08/test/"><meta property="og:site_name" content="文字轨迹"><meta property="og:title" content="Deploy TAILSCALE on OpenWRT to Replace ZEROTIER"><meta property="og:description" content="[Translated and formatted Markdown content]"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-10-30T09:38:06+00:00"><meta property="article:modified_time" content="2022-10-30T09:38:06+00:00"><meta property="article:tag" content="Fetched"><meta property="article:tag" content="Rabbit Dad's Grocery Store"><meta itemprop=name content="Deploy TAILSCALE on OpenWRT to Replace ZEROTIER"><meta itemprop=description content="[Translated and formatted Markdown content]"><meta itemprop=datePublished content="2022-10-30T09:38:06+00:00"><meta itemprop=dateModified content="2022-10-30T09:38:06+00:00"><meta itemprop=wordCount content="556"><meta itemprop=keywords content="Fetched,Rabbit Dad's Grocery Store"><meta name=twitter:card content="summary"><meta name=twitter:title content="Deploy TAILSCALE on OpenWRT to Replace ZEROTIER"><meta name=twitter:description content="[Translated and formatted Markdown content]"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=../../../css/style.css><link rel=stylesheet href=../../../css/custom.css><link rel="shortcut icon" href=../../../favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=../../../ title=文字轨迹 rel=home><div class="logo__item logo__text"><div class=logo__title>文字轨迹</div><div class=logo__tagline>故事流淌过的地方</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=../../../posts/><span class=menu__text>文章</span></a></li><li class=menu__item><a class=menu__link href=../../../tags/><span class=menu__text>标签</span></a></li><li class=menu__item><a class=menu__link href=../../../about/><span class=menu__text>关于</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><meta name=referrer content="never"><h1 class=post__title>Deploy TAILSCALE on OpenWRT to Replace ZEROTIER</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0a14 14 0 110 28 1 1 0 010-28m0 3a3 3 0 100 22 3 3 0 000-22m1 4h-2v8.4l6.8 4.4L22 18l-6-3.8z"/></svg><time class=meta__text datetime=2022-10-30T09:38:06Z>2022-10-30</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=../../../categories/duty/ rel=category>Duty</a></span></div><div class="meta__item-author meta__item"><svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 16 16"><path d="M8 1c2 0 3.5 2 3.5 4.5S10 9 10 9c3 1 4 2 4 6H2c0-4 1-5 4-6 0 0-1.5-1-1.5-3.5S6 1 8 1"/></svg><span class=meta__text>Bloger</span></div></div></header><div class="post__toc toc"><div class=toc__title>Page content</div><div class=toc__menu><nav id=TableOfContents><ul><li><a href=#1-install-tailscale-on-openwrt>1. Install TAILSCALE on OpenWRT</a></li><li><a href=#2-accessing-openwrt-lan-devices-from-the-internet>2. Accessing OpenWRT LAN Devices from the Internet</a></li></ul></nav></div></div><div class="content post__content clearfix"><p>[Translated and formatted Markdown content]</p><h1 id=openwrt-deploy-tailscale-to-replace-zerotier>OpenWRT Deploy TAILSCALE to Replace ZEROTIER</h1><p>By Rabbit Dad&rsquo;s Grocery Store</p><p>In the context of epidemic prevention and control, many people may have the need to remotely access devices. In the domestic network environment, either the free SD-WAN solutions like PUGONGYING or AIKUA need to pay for bandwidth, or the commonly used free ZEROTIER using the UDP protocol, which is prone to QoS issues by the operators, resulting in slow speeds. Solutions like FRP require setting up and maintaining a cloud VM which incurs costs. After some exploration, it was discovered that the TAILSCALE service based on WIREGUARD, is easy to deploy, perfect alternative to ZEROTIER, free and stable. After using it for a few days, it is indeed quite satisfying. The TAILSCALE official website&rsquo;s client documentation covers various common platforms, except for OpenWRT. Hence, this document records the deployment process and pitfalls encountered.</p><h2 id=1-install-tailscale-on-openwrt>1. Install TAILSCALE on OpenWRT</h2><p>The OpenWRT software package repository already includes the TAILSCALE PKG. It can be directly integrated during the OpenWRT firmware compilation process (specific location in &ldquo;Network—VPN—TAILSCALE&rdquo;) or installed by searching through the OpenWRT web interface backend (both TAILSCALE and TAILSCALED need to be installed). The following only records the OpenWRT-side settings.</p><pre tabindex=0><code>tailscale up # start the tailscale service, a verification address for device login will pop up if the operation is normal
</code></pre><p>Click or copy the HTTPS address to visit it in the browser. If you have registered and logged into the TAILSCALE account, you can see that the OpenWRT device has been connected to it. Next, set TAILSCALE to start automatically at boot.</p><pre tabindex=0><code>/etc/init.d/tailscale enable # add to start automatically at boot
ls /etc/rc.d/S*tailscale* # verify if successfully added to the startup items
</code></pre><p>The third step is to add a new network interface to OpenWRT and set firewall rules. The interface name is arbitrary. In &ldquo;Basic Settings,&rdquo; select &ldquo;Static Address&rdquo; as the protocol, choose the IPV4 and IPV6 addresses assigned by the TALESCALE website, select &ldquo;tailscale0&rdquo; Ethernet adapter in the &ldquo;Physical Settings&rdquo; section, and in the &ldquo;Firewall Settings,&rdquo; add the new interface to the LAN zone.</p><p>After completing the above steps, the devices connected to OpenWRT behind can ping remote TAILSCALE nodes.</p><h2 id=2-accessing-openwrt-lan-devices-from-the-internet>2. Accessing OpenWRT LAN Devices from the Internet</h2><p>TAILSCALE allows setting up virtual LAN routes (Subnet) so that remote devices can access LAN devices behind the OpenWRT node. Enter the following command in the OpenWRT SSH command-line interface:</p><pre tabindex=0><code>tailscale up --accept-routes --advertise-routes=X.X.X.X/24 # X.X.X.X is the local address subnet of the OpenWRT device
</code></pre><p>The second step is in the TAILSCALE management interface, find the corresponding OpenWRT device that is connected to approve the SUBNET route.</p><p>After setting up, remote devices can access all devices in the LAN where the OpenWRT device is located using the device&rsquo;s local IP address.</p><p>It is worth noting that currently online tutorials in China omit the &ndash;accept-routes parameter in the SUBNET operation command. According to the official documentation, all SUBNET settings based on Linux systems require the &ndash;accept-routes parameter to make local routing settings effective.</p><p>Finally, take a look at the speed and latency of accessing LAN devices in a different ISP in the evening peak at home through a local Unicom line to a TAILSCALE node in the same city, which is still quite satisfactory, after all, it is based on Linux&rsquo;s WIREGUARD.</p><hr><div></div><hr><a href=https://mp.weixin.qq.com/s/jADVehNe_0NANRt4YlONEQ ,target=_blank rel="noopener noreferrer">RawLink</a></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M4 0h8s2 0 4 2l15 15s2 2 0 4L21 31s-2 2-4 0L2 16s-2-2-2-4V3s0-3 4-3m3 10a3 3 0 000-6 3 3 0 000 6"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=../../../tags/fetched/ rel=tag>fetched</a></li><li class=tags__item><a class="tags__link btn" href=../../../tags/rabbit-dads-grocery-store/ rel=tag>Rabbit Dad's Grocery Store</a></li></ul></div></footer></article></main><div class="authorbox clearfix"><div class=authorbox__header><span class=authorbox__name>About Bloger</span></div></div><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=../../../posts/others/openwrt%E9%83%A8%E7%BD%B2tailscale%E5%B9%B3%E6%9B%BFzerotier/ rel=prev><span class=pager__subtitle>«&#8201;Previous</span><p class=pager__title>OpenWRT部署TAILSCALE平替ZEROTIER</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=../../../posts/others/%E9%83%91%E5%B7%9E%E5%AF%8C%E5%A3%AB%E5%BA%B7%E5%91%98%E5%B7%A5%E8%BF%94%E4%B9%A1%E8%A2%AB%E7%AB%8B%E6%A1%88%E8%B0%83%E6%9F%A5_%E5%AE%98%E6%96%B9_%E6%9C%AA%E6%8A%A5%E5%A4%87_%E9%9A%90%E7%9E%92%E8%A1%8C%E7%A8%8B_%E5%88%B0%E5%A4%84%E8%B7%91/ rel=next><span class=pager__subtitle>Next&#8201;»</span><p class=pager__title>郑州富士康员工返乡被立案调查，官方：未报备 隐瞒行程 到处跑</p></a></div></nav><section class=comments><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//kkitown.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div><aside class=sidebar><div class="widget-search widget"><form class=widget-search__form role=search method=get action=https://google.com/search><input class=widget-search__field type=search placeholder=Search… name=q aria-label=Search…>
<input class=widget-search__submit type=submit value=Search>
<input type=hidden name=sitesearch value=https://ixxmu.github.io/></form></div><div class="widget-recent widget"><h4 class=widget__title>Recent Posts</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=../../../posts/2024-08/_%E4%B8%80%E4%B8%AA%E5%A4%96%E5%9C%B0%E5%A5%B3%E5%AD%A9_%E6%AD%BB%E5%9C%A8%E4%BA%86%E6%88%91%E5%87%BA%E7%A7%9F%E7%9A%84%E5%85%AC%E5%AF%93__%E8%AF%BB%E6%9D%A5%E4%BB%A4%E4%BA%BA%E7%AA%92%E6%81%AF/>《一个外地女孩，死在了我出租的公寓》，读来令人窒息</a></li><li class=widget__item><a class=widget__link href=../../../posts/2024-08/%E6%88%91%E8%B4%9F%E4%B8%AD%E5%8C%BB_%E4%B8%AD%E5%8C%BB%E8%B4%9F%E6%88%91_%E4%BB%8E%E4%B8%9A48%E5%B9%B4%E8%80%81%E4%B8%AD%E5%8C%BB%E7%9A%84%E6%B3%A3%E8%A1%80%E4%B9%8B%E4%BD%9C_%E5%8F%91%E4%BA%BA%E6%B7%B1%E6%80%9D_%E4%BB%A4%E4%BA%BA%E8%AD%A6%E9%86%92_/>我负中医，中医负我（从业48年老中医的泣血之作，发人深思，令人警醒）</a></li><li class=widget__item><a class=widget__link href=../../../posts/2024-08/%E8%BF%99%E6%AC%BE%E5%BC%80%E6%BA%90%E5%85%8D%E8%B4%B9%E7%9A%84%E7%BD%91%E9%A1%B5%E4%BF%9D%E5%AD%98_%E6%89%B9%E6%B3%A8%E5%B7%A5%E5%85%B7_%E4%BD%A0%E6%80%BB%E4%BC%9A%E7%94%A8%E5%BE%97%E4%B8%8A_/>这款开源免费的网页保存&批注工具，你总会用得上！</a></li><li class=widget__item><a class=widget__link href=../../../posts/2024-08/%E8%B0%B7%E6%AD%8C%E7%A7%91%E5%AD%A6%E5%AE%B6%E4%B8%87%E5%AD%97%E9%95%BF%E6%96%87__%E6%94%B9%E5%8F%98%E4%BD%A0%E8%81%8C%E4%B8%9A%E7%94%9F%E6%B6%AF%E7%9A%84%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0_%E6%88%91%E5%A6%82%E4%BD%95%E8%BF%90%E7%94%A8%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%AE%8C%E6%88%90%E5%B7%A5%E4%BD%9C_%E5%BB%BA%E8%AE%AE%E6%AF%8F%E4%B8%AA%E4%BA%BA%E9%83%BD%E8%A6%81%E8%AF%BB%E4%B8%80%E9%81%8D/>谷歌科学家万字长文：《改变你职业生涯的一篇文章，我如何运用人工智能完成工作》建议每个人都要读一遍</a></li><li class=widget__item><a class=widget__link href=../../../posts/2024-08/_%E6%A4%8D%E9%AA%A8%E6%9D%90%E6%96%99_%E5%90%8C%E7%A7%8D%E5%BC%82%E4%BD%93%E9%AA%A8/>【植骨材料】同种异体骨</a></li></ul></div></div><div class="widget-categories widget"><h4 class=widget__title>Categories</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=../../../categories/duty/>Duty</a></li><li class=widget__item><a class=widget__link href=../../../categories/duty2/>Duty2</a></li></ul></div></div><div class="widget-taglist widget"><h4 class=widget__title>Tags</h4><div class=widget__content><a class="widget-taglist__link widget__link btn" href=../../../tags/cnbeta/ title=Cnbeta>Cnbeta (31)</a>
<a class="widget-taglist__link widget__link btn" href=../../../tags/fetched/ title=Fetched>Fetched (443)</a>
<a class="widget-taglist__link widget__link btn" href=../../../tags/githubdaily/ title=GitHubDaily>GitHubDaily (7)</a>
<a class="widget-taglist__link widget__link btn" href=../../../tags/%E4%B8%81%E9%A6%99%E5%9B%AD/ title=丁香园>丁香园 (24)</a>
<a class="widget-taglist__link widget__link btn" href=../../../tags/%E4%BA%BA%E7%89%A9/ title=人物>人物 (6)</a>
<a class="widget-taglist__link widget__link btn" href=../../../tags/%E5%8D%97%E6%96%B9%E5%91%A8%E6%9C%AB/ title=南方周末>南方周末 (9)</a>
<a class="widget-taglist__link widget__link btn" href=../../../tags/%E5%B0%8F%E5%A4%A7%E5%A4%AB%E6%BC%AB%E7%94%BB/ title=小大夫漫画>小大夫漫画 (5)</a>
<a class="widget-taglist__link widget__link btn" href=../../../tags/%E5%B0%91%E6%95%B0%E6%B4%BE/ title=少数派>少数派 (6)</a>
<a class="widget-taglist__link widget__link btn" href=../../../tags/%E6%98%9F%E7%90%83%E5%95%86%E4%B8%9A%E8%AF%84%E8%AE%BA/ title=星球商业评论>星球商业评论 (5)</a>
<a class="widget-taglist__link widget__link btn" href=../../../tags/%E7%94%9F%E4%BF%A1%E6%8A%80%E8%83%BD%E6%A0%91/ title=生信技能树>生信技能树 (9)</a>
<a class="widget-taglist__link widget__link btn" href=../../../tags/%E7%9F%A5%E8%AF%86%E5%88%86%E5%AD%90/ title=知识分子>知识分子 (8)</a>
<a class="widget-taglist__link widget__link btn" href=../../../tags/%E7%BD%91%E6%98%93%E6%95%B0%E8%AF%BB/ title=网易数读>网易数读 (5)</a>
<a class="widget-taglist__link widget__link btn" href=../../../tags/%E8%B4%A2%E7%BB%8F%E4%B8%89%E5%88%86%E9%92%9F/ title=财经三分钟>财经三分钟 (6)</a>
<a class="widget-taglist__link widget__link btn" href=../../../tags/%E9%83%91%E5%B7%9E%E6%A5%BC%E5%B8%82/ title=郑州楼市>郑州楼市 (29)</a></div><a href=../../../tags/></a></div><div class="widget-social widget"><h4 class="widget-social__title widget__title">Social</h4><div class="widget-social__content widget__content"><div class="widget-social__item widget__item"><a class="widget-social__link widget__link btn" title=Facebook rel="noopener noreferrer" href=https://facebook.com/username target=_blank><svg class="widget-social__link-icon icon icon-facebook" width="24" height="24" viewBox="0 0 352 352"><path d="m0 32v288c0 17.5 14.5 32 32 32h288c17.5.0 32-14.5 32-32V32c0-17.5-14.5-32-32-32H32C14.5.0.0 14.5.0 32zm320 0v288h-83V212h41.5l6-48H237v-31c0-14 3.5-23.5 23.5-23.5h26V66c-4.4-.6-19.8-1.5-37.5-1.5-36.9.0-62 22.2-62 63.5v36h-42v48h42v108H32V32z"/></svg>
<span>Facebook</span></a></div><div class="widget-social__item widget__item"><a class="widget-social__link widget__link btn" title=Twitter rel="noopener noreferrer" href=https://twitter.com/username target=_blank><svg class="widget-social__link-icon icon icon-twitter" width="24" height="24" viewBox="0 0 384 312"><path d="m384 36.9c-14.1 6.3-29.3 10.5-45.2 12.4 16.3-9.7 28.8-25.2 34.6-43.6-15.2 9-32.1 15.6-50 19.1-14.4-15.2-34.9-24.8-57.5-24.8-43.5.0-78.8 35.3-78.8 78.8.0 6.2.7 12.2 2 17.9-65.5-3.3-123.5-34.6-162.4-82.3C20 26 16.1 39.6 16.1 54c0 27.3 13.9 51.4 35 65.6-12.9-.4-25.1-4-35.7-9.9v1c0 38.2 27.2 70 63.2 77.2-6.6 1.8-13.6 2.8-20.8 2.8-5.1.0-10-.5-14.8-1.4 10 31.3 39.1 54.1 73.6 54.7-27 21.1-60.9 33.7-97.8 33.7-6.4.0-12.6-.4-18.8-1.1C34.9 299 76.3 312 120.8 312c144.9.0 224.1-120 224.1-224.1.0-3.4-.1-6.8-.2-10.2 15.4-11.1 28.7-25 39.3-40.8z"/></svg>
<span>Twitter</span></a></div><div class="widget-social__item widget__item"><a class="widget-social__link widget__link btn" title=Instagram rel="noopener noreferrer" href=https://www.instagram.com/username target=_blank><svg class="widget-social__link-icon icon icon-instagram" width="24" height="24" viewBox="0 0 256 256"><circle cx="193" cy="59" r="15"/><path fill-rule="evenodd" d="M101 0h54c41 0 58.4 3.9 74.5 17C256.2 37.5 256 74.8 256 97.7v60c0 26.7.0 60.4-26.5 81.4-16 13.4-33.5 16.9-74.5 16.9h-54c-41 0-57.5-3.5-74.5-16.9C1 218.9.5 186.3.1 160.5L0 155V97.7c0-23-.2-60.2 26.5-80.7C45 2 60 0 101 0zm4.9 23h44.3c45.8.0 58.3 3.5 70.3 17.5 11.8 13.2 12 30.1 12.5 62.9V156c.2 20.8.3 45.8-12.5 59.5-12 14-24.5 17.5-70.3 17.5h-44.3c-45.9.0-57.3-3.5-70.4-17.5-12.2-13-12.3-36.5-12.4-56.7v-55.6c.4-32.6.7-49.6 12.4-62.7C48 26.5 60 23 105.9 23zm19.6 144.5a42 42 0 100-84 42 42 0 000 84zm0 22.5a64.5 64.5.0 100-129 64.5 64.5.0 000 129z"/></svg>
<span>Instagram</span></a></div></div></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2024 文字轨迹.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=../../../js/menu.js></script><script src=../../../js/custom.js></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script></body></html>